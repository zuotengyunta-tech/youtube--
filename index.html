// 検証用：handle → channel情報を取る
// ※ node.js なら fetch が使える環境で、ブラウザでは CORS 制限あるかも
async function getChannelByHandle(handle, apiKey) {
  const url = new URL("https://www.googleapis.com/youtube/v3/channels");
  url.searchParams.set("part", "contentDetails,snippet");
  // forHandle に @付きでも可 (API仕様) :contentReference[oaicite:3]{index=3}
  url.searchParams.set("forHandle", handle);
  url.searchParams.set("key", apiKey);

  const res = await fetch(url.toString());
  const data = await res.json();
  console.log("handle:", handle, " → response:", data);
  return data;
}

// 検証対象ハンドル一覧
const handles = ["@ryu_potex", "@coachjoji", "@Fラン大学就職チャンネル"];
// あなたの API キー
const API_KEY = "YOUR_KEY_HERE";

(async () => {
  for (const h of handles) {
    try {
      const info = await getChannelByHandle(h, API_KEY);
      if (info.items && info.items.length > 0) {
        console.log("SUCCESS", h, "channelId:", info.items[0].id,
                    "uploads playlist:", info.items[0].contentDetails?.relatedPlaylists?.uploads);
      } else {
        console.warn("NOT FOUND via API for handle:", h);
      }
    } catch (e) {
      console.error("ERROR for handle:", h, e);
    }
  }
})();
