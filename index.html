<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>ãƒãƒ£ãƒ³ãƒãƒ«å‹•ç”»ä¸€è¦§ï¼ˆã‚¯ãƒªãƒƒã‚¯ã§å†ç”Ÿï¼‰</title>
  <style>
    .video-item {
      cursor: pointer;
      margin-bottom: 20px;
    }
    .video-item img {
      max-width: 100%;
      display: block;
    }
    iframe {
      width: 100%;
      max-width: 560px;
      height: 315px;
    }
  </style>
</head>

<body>
  <h1>ã‚¸ãƒ§ãƒ¼ã‚¸ãƒ»ãƒ¡ãƒ³ã‚ºã‚³ãƒ¼ãƒï¼ˆ@coachjojiï¼‰å‹•ç”»ä¸€è¦§</h1>
  <div id="videos">èª­ã¿è¾¼ã¿ä¸­...</div>

  <script>
    // â˜…ã‚ãªãŸã® YouTube Data API ã‚­ãƒ¼
    const API_KEY = "YOUR_API_KEY";

    // @coachjoji ã® channelId
    const CHANNEL_ID = "UCmTtK0CuxRzD84yKhrtam4A";

    // ã™ã¹ã¦ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å‹•ç”»ãŒå…¥ã£ã¦ã„ã‚‹è‡ªå‹•ãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆ
    const UPLOADS_PLAYLIST_ID = "UUmTtK0CuxRzD84yKhrtam4A";

    const container = document.getElementById("videos");

    // ğŸ”¥ å®‰å…¨ãª videoId â†’ æƒ…å ±å–å¾—
    async function getVideoData(videoId) {
      const url = `https://www.googleapis.com/youtube/v3/videos?id=${videoId}&part=snippet&key=${API_KEY}`;

      try {
        const res = await fetch(url);
        const data = await res.json();

        if (!res.ok || data.error) return null;
        if (!data.items || data.items.length === 0) return null;

        return data.items[0];
      } catch {
        return null;
      }
    }

    // ğŸ”¥ ãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆï¼ˆã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å‹•ç”»ä¸€è¦§ï¼‰ã‹ã‚‰å…¨ videoId ã‚’å–å¾—
    async function fetchAllVideoIds(token = "", results = []) {
      const url =
        `https://www.googleapis.com/youtube/v3/playlistItems?part=snippet` +
        `&playlistId=${UPLOADS_PLAYLIST_ID}&maxResults=50&key=${API_KEY}` +
        (token ? `&pageToken=${token}` : "");

      try {
        const res = await fetch(url);
        const data = await res.json();

        if (!data.items) return results;

        data.items.forEach(item => {
          const videoId = item?.snippet?.resourceId?.videoId;
          if (videoId) results.push(videoId);
        });

        if (data.nextPageToken) {
          return fetchAllVideoIds(data.nextPageToken, results);
        }
      } catch { }

      return results;
    }

    // ğŸ”¥ åˆæœŸãƒ­ãƒ¼ãƒ‰
    (async () => {
      container.innerHTML = "èª­ã¿è¾¼ã¿ä¸­â€¦";

      const ids = await fetchAllVideoIds();

      if (!ids.length) {
        container.innerHTML = "å‹•ç”»ãŒã‚ã‚Šã¾ã›ã‚“ã€‚";
        return;
      }

      container.innerHTML = "";

      for (const id of ids) {
        const v = await getVideoData(id);
        if (!v) continue;

        const title = v.snippet.title;
        const thumb = v.snippet.thumbnails.medium.url;

        const div = document.createElement("div");
        div.className = "video-item";
        div.innerHTML = `
          <img src="${thumb}" alt="${title}" loading="lazy" />
          <p>${title}</p>
        `;

        div.onclick = () => {
          div.innerHTML = `
            <iframe src="https://www.youtube.com/embed/${id}" 
              frameborder="0" allowfullscreen loading="lazy"></iframe>
          `;
        };

        container.appendChild(div);
      }
    })();
  </script>
</body>
</html>
